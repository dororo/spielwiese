/**
 * Copyright brandung GmbH & Co.KG
 * http://www.brandung.de/
 *
 * Date: 2019-01-12
 * MIT License (MIT)
 */

Capitan.Component.instagram=function(a){var b={},c={defaults:{componentSelector:".instagram",pluginOptions:{userId:"5792752806",clientId:"e4bf2efd867f430b9f4a87279f00c0d1",accessToken:"5792752806.e4bf2ef.29fc8631f4ae4e5b94020544be9aada7",clientStatus:"Sandbox Mode",redirectUri:window.location,selectors:{data:".output",trigger:".instagram-load",getAuth:"instagram-auth"}}}},d=null;return c.bindEvents=function(){var a=c.defaults.pluginOptions;Capitan.Vars.$doc.on("click",a.selectors.trigger,function(a){a.preventDefault(),d.next()})},c.callInstaApi=function(){var b=c.defaults.pluginOptions,d="https://api.instagram.com/oauth/authorize/?client_id="+b.clientId+"&redirect_uri="+b.redirectUri+"&response_type=token";a.ajax({method:"GET",url:d,context:document.body}).done(function(a){b.accessToken=decodeURIComponent(window.location.search.substring(1).split("=")[0]),c.setCookie("oauth",JSON.stringify(b.accessToken),30)})},c.initPlugin=function(){var b=c.defaults.pluginOptions;d=new Instafeed({get:"user",userId:b.userId,clientId:b.clientId,accessToken:b.accessToken,resolution:"standard_resolution",template:'<div class="col-xs-12 col-md-6 col-lg-4"><div class="teaser"><div class="teaser__media"><a href="{{image}}" alt="{{link}}" data-fancybox="lightbox" data-caption="{{caption}}"><img id="{{id}}" src="{{image}}" title="likes:{{likes}}. {{location}}" width="{{width}}" height="{{height}}" /></a></div><div class="teaser__content"><div class="teaser__text">{{caption}}<a class="text-link" href="{{link}}" target="_blank" alt="{{model.user.username}}">click here</a></div></div></div></div>',sortBy:"random",limit:6,links:!1,after:function(){this.hasNext()||a(b.selectors.trigger).attr("disabled",!0)}}),d.run()},c.getCookie=function(a,b){var c=a+"=",d=document.cookie.split(";"),e=null;void 0===b&&(b=!1);for(var f=0;f<d.length;f++){for(e=d[f];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(c))return b?decodeURIComponent(e.substring(c.length,e.length)):e.substring(c.length,e.length)}return null},c.setCookie=function(a,b,c,d){var e=new Date,f="";return c&&(e.setTime(e.getTime()+24*c*60*60*1e3),f="; expires="+e.toGMTString()),void 0===d&&(d=!1),document.cookie=d?a+"="+encodeURIComponent(b)+f+"; path=/":a+"="+b+f+"; path=/",!0},b.init=function(b,d){var e=a.extend(!0,{},c.defaults,b);e.componentSelector&&(a(e.componentSelector,d||document),c.initPlugin(),c.bindEvents())},b}(jQuery),Capitan.Component.instagram.init({});